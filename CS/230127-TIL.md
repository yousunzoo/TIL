# 230127 자료구조 강의



## Queue

* FIFO(First In First Out, 선입선출) 구조의 자료 구조
* 장점 : 데이터 접근, 삽입, 제거가 빠르다.
* 단점 : 중간에 위치한 데이터에 대한 접근이 불가능하다.



### 큐의 이해

* 스택과 다소 유사한 추상 데이터 구조
* 스택과 달리 대기열은 양쪽 끝이 열려있음
* 한쪽 끝은 항상 데이터를 삽입(enqueue)하는데 사용되고, 다른 쪽 끝은 데이터를 제거(dequeue)하는데 쓰임
* 먼저 저장된 데이터 항목이 먼저 엑세스 된다.



### Queue의 추상자료형

| Method name | rule               |
| ----------- | ------------------ |
| Enqueue     | 맨 뒤에 요소 삽입  |
| Dequeue     | 맨 앞에 요소 삭제  |
| Peek        | 데이터 참조        |
| front       | 프론트 데이터 출력 |
| rear        | 레어 데이터 출력   |

* Queue에서는 double-linked-list 사용



### 큐 & 스택 in JS

* 자바스크립트는 싱글 스레드 기반의 언어이고, JS 엔진은 하나의 호출 스택(Call Stack)만을 사용

  * 요청이 동기적으로 처리되어, **한 번에 한 가지 일만 처리할 수 있음**

* JS 엔진은 스택과 큐 기반으로 작동

  * 마이크로 테스크 큐와 매크로 테스크 큐가 이벤트 루프에 의해 콜스택에 넘겨줌으로써 입력 처리
  * 자바스크립트가 비동기 함수를 사용할 수 있도록 도와줌!

  

> * 이벤트 루프 : 콜 스택이 비었다면 태스크 큐에 있는 콜백 함수 처리
> * 태스크 큐 : 태스크의 Set. 이벤트 루프는 하나 이상의 태스크 큐를 갖는다. 이벤트 루프에서 가장 오래된 태스크를 가져온다. (선입선출)



![img](https://uploads.disquscdn.com/images/9466d8aa53fc5b3e63a92858a94bb429df02bbd20012b738f0461343beaa6f90.gif?w=600&h=272)





## 덱

* (FILO+FIFO) 형태의 자료구조
* 장점
  * FIFO 형식이든 FILO 형식이든 둘 다 사용할 수 있음(유연성)
  * 양쪽에서 요소를 빠르게 추가/제거 가능
* 단점
  * 중간 데이터에 접근하는 것은 느린 편
  * 메모리 사용량이 크다
    * 이중 연결 리스트



### 덱의 이해

* 양쪽 끝에서 삽입과 삭제가 모두 가능한 자료 구조의 형태
* 두 개의 포인터를 사용하여, 양쪽에서 삭제와 삽입 발생시킬 수 있음.
* 큐와 스택을 합친 형태
* 큐와 스택과 다른 점은 데이터가 양쪽으로 삭제/삽입이 가능하다.



### 덱의 추상자료형

| Method name | rule               |
| ----------- | ------------------ |
| printall    | 모든 요소 출력     |
| addFirst    | head에 데이터 삽입 |
| removeFirst | head에 데이터 제거 |
| addLast     | tail에 데이터 삽입 |
| removeLast  | tail에 데이터 제거 |
| isEmpty     | 비어있는지 확인    |



#### 스택 vs 큐 vs 덱

![image-20230127180135660](../images/230127-TIL/image-20230127180135660.png)





## 힙

* 각 노드가 자식 값에 따라 정렬되어야 하는 트리와 같은 자료구조
* 특징
  * 힙 트리에서는 중복된 값을 허용한다.
    * 이진 탐색트리는 중복된 값 허용 X
  * 힙에서는 가장 높은 (혹은 가장 낮은) 우선순위를 가지는 노드가 항상 뿌리 노드에 오게 되는 특징이 있다.
    * 이를 응용하여 우선순위 큐와 같은 추상적 자료형 구현 가능



### 힙 in JavaScript

* Heap Memory(가용 메모리)
  * 동적으로 할당된 변수가 할당하는 영역
  * 원시타입은 스택 영역에 그리고 객체 타입은 힙 영역으로 담김
  * 힙 메모리(메모리 공간이 동적으로 할당되고 해제)와 힙은 서로 다름!



#### 자바스크립트 실행 예시

![image-20230127180607520](../images/230127-TIL/image-20230127180607520.png)



* 자바스크립트는 싱글 스레드 기반 언어로 스택 메모리를 하나만 가진다.
* 스택은 함수 호출이 끝난 후 OS에 의해 정리되지만, 힙 메모리는 정리되지 않는다.
* 쓸모없는 데이터가 메모리 상에 있다면 불필요하게 공간을 차지하는 것으로 메모리 누수 상태라고 표현한다.



ex) 특정 컴포넌트에서 스크롤 이벤트를 걸어주기 위해 EventListener를 등록하고, removeEventListener를 하지 않아 해당 이벤트를 필요로 하지 않는 화면에서도 메모리 상에 이벤트가 남아있는 경우도 메모리 leak 이슈 발생 





### 아웃 오브 메모리

* 힙 메모리(객체 메모리)에 입력만 들어오면 큐에 데이터가 계속 쌓이기만 해서 발생하는 에러
* 메모리 릭을 계속 유발하면 Out of memory 오류와 함께 프로세스가 종료될 수 있다.
* 해당 문제를 공간 복잡도 관점으로 봐서 메모리 공간 문제를 해결할 수 있도록 하는 노력 필요



### 스택 오버플로우 VS 아웃 오브 메모리

* 공통점
  * 공간 부족 문제로 인해 일어나는 에러
  * 발생 원인과 해결 방법은 유사함
* 차이점

| 에러 종류      | 저장되는 데이터 위치 | 저장되는 데이터 종류 | 저장되는 방법 |
| -------------- | -------------------- | -------------------- | ------------- |
| 스택오버플로우 | 콜스택               | 변수                 | FILO          |
| 아웃오브메모리 | 힙메모리의 큐        | 객체                 | FIFO          |



* 해결 방법
  * 저장공간 늘리기 ➡️ 그릇이 작으면 큰 그릇으로 바꾸면 된다.
    * `set NODE_OPTIONS=--max_old_space_size=4096`
  * 기저조건(탈출 조건) 생성 ➡️ 사람이 열명 이상이면 통과라는 조건을 만든다.
  * 데이터 동적 할당 ➡️ 메모리가 다 찬다면 다른 메모리에 할당하면 된다.
    * 고정 크기의 자료구조를 택했다면, 동적으로 할당